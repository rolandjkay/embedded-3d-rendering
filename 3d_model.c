#include "3d_model.h"
#include "defs.h"

// If we ever compute normals automatically...
// Need vertices to be arranged in anti-clockwise order from the perspective of
// someone sitting inside the form, if we are to use the backface culling algo.


/***************************************************************************
 ** Cobra MK III
 ***************************************************************************/

static const Point cobra_points[] = {
  //  x,    y,   z,dist, f1, f2, f3, f4
  {  32,    0,   76, 31, 15, 15, 15, 15}, // 0
  { -32,    0,   76, 31, 15, 15, 15, 15}, // 1
  {   0,   26,   24, 31, 15, 15, 15, 15}, // 2
  {-120,   -3,   -8, 31,  7,  3, 10, 10}, // 3
  { 120,   -3,   -8, 31,  8,  4, 12, 12}, // 4
  { -88,   16,  -40, 31, 15, 15, 15, 15}, // 5
  {  88,   16,  -40, 31, 15, 15, 15, 15}, // 6
  { 128,   -8,  -40, 31,  9,  8, 12, 12}, // 7
  {-128,   -8,  -40, 31,  9,  7, 10, 10}, // 8
  {   0,   26,  -40, 31,  6,  5,  9,  9}, // 9
  { -32,  -24,  -40, 31, 10,  9, 11, 11}, // 10
  {  32,  -24,  -40, 31, 11,  9, 12, 12}, // 11
  { -36,    8,  -40, 20,  9,  9,  9,  9}, // 12
  {  -8,   12,  -40, 20,  9,  9,  9,  9}, // 13
  {   8,   12,  -40, 20,  9,  9,  9,  9}, // 14
  {  36,    8,  -40, 20,  9,  9,  9,  9}, // 15
  {  36,  -12,  -40, 20,  9,  9,  9,  9}, // 16
  {   8,  -16,  -40, 20,  9,  9,  9,  9}, // 17
  {  -8,  -16,  -40, 20,  9,  9,  9,  9}, // 18
  { -36,  -12,  -40, 20,  9,  9,  9,  9}, // 19
  {   0,    0,   76,  6, 11,  0, 11, 11}, // 20
  {   0,    0,   90, 31, 11,  0, 11, 11}, // 21
  { -80,   -6,  -40,  8,  9,  9,  9,  9}, // 22
  { -80,    6,  -40,  8,  9,  9,  9,  9}, // 23
  { -88,    0,  -40,  6,  9,  9,  9,  9}, // 24
  {  80,    6,  -40,  8,  9,  9,  9,  9}, // 25
  {  88,    0,  -40,  6,  9,  9,  9,  9}, // 26
  {  80,   -6,  -40,  8,  9,  9,  9,  9}, // 27
};

static const Line cobra_lines[] =
{
//dist,f1, f2, start_point, end_point
  {31, 11,  0,  0,  1}, // 0
  {31, 12,  4,  0,  4}, // 1
  {31, 10,  3,  1,  3}, // 2
  {31, 10,  7,  3,  8}, // 3
  {31, 12,  8,  4,  7}, // 4
  {31,  9,  8,  6,  7}, // 5
  {31,  9,  6,  6,  9}, // 6
  {31,  9,  5,  5,  9}, // 7
  {31,  9,  7,  5,  8}, // 8
  {31,  5,  1,  2,  5}, // 9
  {31,  6,  2,  2,  6}, // 10
  {31,  7,  3,  3,  5}, // 11
  {31,  8,  4,  4,  6}, // 12
  {31,  1,  0,  1,  2}, // 13
  {31,  2,  0,  0,  2}, // 14
  {31, 10,  9,  8, 10}, // 15
  {31, 11,  9, 10, 11}, // 16
  {31, 12,  9,  7, 11}, // 17
  {31, 11, 10,  1, 10}, // 18
  {31, 12, 11,  0, 11}, // 19
  {29,  3,  1,  1,  5}, // 20
  {29,  4,  2,  0,  6}, // 21
  { 6, 11,  0, 20, 21}, // 22
  {20,  9,  9, 12, 13}, // 23
  {20,  9,  9, 18, 19}, // 24
  {20,  9,  9, 14, 15}, // 25
  {20,  9,  9, 16, 17}, // 26
  {19,  9,  9, 15, 16}, // 27
  {17,  9,  9, 14, 17}, // 28
  {19,  9,  9, 13, 18}, // 29
  {19,  9,  9, 12, 19}, // 30
  {30,  6,  5,  2,  9}, // 31
  { 6,  9,  9, 22, 24}, // 32
  { 6,  9,  9, 23, 24}, // 33
  { 8,  9,  9, 22, 23}, // 34
  { 6,  9,  9, 25, 26}, // 35
  { 6,  9,  9, 26, 27}, // 36
  { 8,  9,  9, 25, 27}, // 37
};

static const Vector cobra_face_normals[] =
{
  {   0,   62,   31}, // 0
  { -18,   55,   16}, // 1
  {  18,   55,   16}, // 2
  { -16,   52,   14}, // 3
  {  16,   52,   14}, // 4
  { -14,   47,    0}, // 5
  {  14,   47,    0}, // 6
  { -61,  102,    0}, // 7
  {  61,  102,    0}, // 8
  {   0,    0,  -80}, // 9
  {  -7,  -42,    9}, // 10
  {   0,  -30,    6}, // 11
  {   7,  -42,    9}, // 12
};

const Object cobra = {
 countof(cobra_points),
 countof(cobra_lines),
 countof(cobra_face_normals),
 &cobra_points[0],
 &cobra_lines[0],
 &cobra_face_normals[0]
};


/***************************************************************************
 ** Viper
 ***************************************************************************/

static const Point viper_points[] =
{
  {   0,    0,   72, 31,  2,  1,  4,  3},
  {   0,   16,   24, 30,  1,  0,  2,  2},
  {   0,  -16,   24, 30,  4,  3,  5,  5},
  {  48,    0,  -24, 31,  4,  2,  6,  6},
  { -48,    0,  -24, 31,  3,  1,  6,  6},
  {  24,  -16,  -24, 30,  5,  4,  6,  6},
  { -24,  -16,  -24, 30,  3,  5,  6,  6},
  {  24,   16,  -24, 31,  2,  0,  6,  6},
  { -24,   16,  -24, 31,  1,  0,  6,  6},
  { -32,    0,  -24, 19,  6,  6,  6,  6},
  {  32,    0,  -24, 19,  6,  6,  6,  6},
  {   8,    8,  -24, 19,  6,  6,  6,  6},
  {  -8,    8,  -24, 19,  6,  6,  6,  6},
  {  -8,   -8,  -24, 18,  6,  6,  6,  6},
  {   8,   -8,  -24, 18,  6,  6,  6,  6},
};

static const Line viper_lines[] =
{
  {31,  4,  2,  0,  3},
  {30,  2,  1,  0,  1},
  {30,  4,  3,  0,  2},
  {31,  3,  1,  0,  4},
  {30,  2,  0,  1,  7},
  {30,  1,  0,  1,  8},
  {30,  5,  4,  2,  5},
  {30,  5,  3,  2,  6},
  {31,  6,  0,  7,  8},
  {30,  6,  5,  5,  6},
  {31,  6,  1,  4,  8},
  {30,  6,  3,  4,  6},
  {31,  6,  2,  3,  7},
  {30,  4,  6,  3,  5},
  {19,  6,  6,  9, 12},
  {18,  6,  6,  9, 13},
  {19,  6,  6, 10, 11},
  {18,  6,  6, 10, 14},
  {16,  6,  6, 11, 14},
  {16,  6,  6, 12, 13},
};

static const Vector viper_face_normals[] =
{
  {    0,   32,    0},
  {  -22,   33,   11},
  {   22,   33,   11},
  {  -22,  -33,   11},
  {   22,  -33,   11},
  {    0,  -32,    0},
  {    0,    0,  -48},
};

const Object viper = {
 countof(viper_points),
 countof(viper_lines),
 countof(viper_face_normals),
 &viper_points[0],
 &viper_lines[0],
 &viper_face_normals[0]
};


/***************************************************************************
 ** Missile
 ***************************************************************************/

static const Point missile_points[] =
{
  {   0,    0,   68, 31,  1,  0,  3,  2},
  {   8,   -8,   36, 31,  2,  1,  5,  4},
  {   8,    8,   36, 31,  3,  2,  7,  4},
  {  -8,    8,   36, 31,  3,  0,  7,  6},
  {  -8,   -8,   36, 31,  1,  0,  6,  5},
  {   8,    8,  -44, 31,  7,  4,  8,  8},
  {   8,   -8,  -44, 31,  5,  4,  8,  8},
  {  -8,   -8,  -44, 31,  6,  5,  8,  8},
  {  -8,    8,  -44, 31,  7,  6,  8,  8},
  {  12,   12,  -44,  8,  7,  4,  8,  8},
  {  12,  -12,  -44,  8,  5,  4,  8,  8},
  { -12,  -12,  -44,  8,  6,  5,  8,  8},
  { -12,   12,  -44,  8,  7,  6,  8,  8},
  {  -8,    8,  -12,  8,  7,  6,  7,  7},
  {  -8,   -8,  -12,  8,  6,  5,  6,  6},
  {   8,    8,  -12,  8,  7,  4,  7,  7},
  {   8,   -8,  -12,  8,  5,  4,  5,  5},
};

static const Line missile_lines[] =
{
  {31,  2,  1,  0,  1},
  {31,  3,  2,  0,  2},
  {31,  3,  0,  0,  3},
  {31,  1,  0,  0,  4},
  {31,  2,  4,  1,  2},
  {31,  5,  1,  1,  4},
  {31,  6,  0,  3,  4},
  {31,  7,  3,  2,  3},
  {31,  7,  4,  2,  5},
  {31,  5,  4,  1,  6},
  {31,  6,  5,  4,  7},
  {31,  7,  6,  3,  8},
  {31,  8,  6,  7,  8},
  {31,  8,  7,  5,  8},
  {31,  8,  4,  5,  6},
  {31,  8,  5,  6,  7},
  { 8,  8,  5,  6, 10},
  { 8,  8,  7,  5,  9},
  { 8,  8,  7,  8, 12},
  { 8,  8,  5,  7, 11},
  { 8,  7,  4,  9, 15},
  { 8,  5,  4, 10, 16},
  { 8,  7,  6, 12, 13},
  { 8,  6,  5, 11, 14},
};

static const Vector missile_face_normals[] =
{
  {  -64,    0,   16},
  {    0,  -64,   16},
  {   64,    0,   16},
  {    0,   64,   16},
  {   32,    0,    0},
  {    0,  -32,    0},
  {  -32,    0,    0},
  {    0,   32,    0},
  {    0,    0, -176},
};

const Object missile = {
 countof(missile_points),
 countof(missile_lines),
 countof(missile_face_normals),
 &missile_points[0],
 &missile_lines[0],
 &missile_face_normals[0]
};
